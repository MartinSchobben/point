---
output: 
  github_document:
    pandoc_args: --webtex
---
<!--  use the --webtex argument in the YAML to render equations -->


```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  warning = FALSE, 
  results = "asis",
  encoding ='UTF-8'
)
```

# point

<!-- badges: start -->
<!-- badges: end -->

This projects was originally inspired by the lack of detailed insight in the inner workings of the default software for the Cameca NanoSIMS50L (Utrecht
University). Hence this project has the objective of processing raw count data into ion and isotope ratios of point-sourced measurements, and to establish the
internal and external precision of individual measurements and complete series of measurements, respectively

## Installation

You can install the released version of point 

<!-- ``` r -->
<!-- install.packages("point") -->
<!-- ``` -->

## Example

This is an example of how Cameca NanoSIMS50L raw datafiles can be extracted, processed and analysed for the $^{13}$C/$^{12}$C isotope ratio (R). This produces a tibble with descriptive and predictive poisson statistics (demarcated with $\hat$) of the ion count data.

```{r example}

# library(point)
devtools::load_all(".")
# Use system.file() to access the examples bundled with this package in the
# inst/extdata directory. The examples directories are named:
# 2020-01-17-TREASURE and "2018-01-19-GLENDON"

# raw data containing 13C and 12C counts on carbonate
tb.rw <- read_IC(system.file("extdata", "2018-01-19-GLENDON", package = "point"))

# processing raw ion count data
tb.pr <- cor_IC(tb.rw, N.rw, t.rw, det_type.mt, deadtime = 44, thr = 180)

# single ion descriptive an predictive statistics for all measured ions
tb.Xt <- stat_Xt(tb.pr, Xt.pr, N.pr, file.nm, species.nm)

# descriptive an predictive statistics for 13C/12C ratios
tb.R <- stat_R(tb.pr, Xt.pr, N.pr, ID = "ID", ion1 = "13C", ion2 = "12C",
               file.nm, species.nm, latex = TRUE)


# use the second element of the list to get nice variable names rendering in 
# Rmarkdown
knitr::kable(tb.R[[1]] , escape = FALSE, 
             col.names = c("file","R", names(tb.R[[2]])),
             format.args = list(digits = 5, format = "G", flag = "0")) 
```

